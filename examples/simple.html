<!DOCTYPE html>
<html>
  <head>
    <title>ShapeJs Example</title>
    <style>
      #preview-model { width: 500px; height: 400px; border: 2px #eee inset; }
      #shapejs-script { width: 500px; height: 200px; }
    </style>
  </head>
  <body>
    <input type="text" id="period" value="10" /><br />
    <textarea id="shapejs-script">
function main(args) {
  var period = args[0];
  var grid = createGrid(-16*MM,16*MM,-16*MM,16*MM,-16*MM,16*MM,0.1*MM);
  var intersect = new Intersection();
  intersect.add(new Sphere(15*MM));
  intersect.add(new VolumePatterns.Gyroid(period*MM, 1*MM));
  var maker = new GridMaker();
  maker.setSource(intersect);
  var dest = createGrid(grid);
  maker.makeGrid(dest);
  return dest;
}
    </textarea>
    <button id="run-script">Run Script</button>
    <div id="preview-model"></div>

    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script type="text/javascript" src="//raw.github.com/Shapeways/ShapeJs/v2.1.0/src/jquery.shapejs-2.1.0.min.js"></script>
    <script type="text/javascript">
      $("#run-script").click(function(){
        $("#shapejs-script").executeShapeJs(
          {param1: $("#period").val()},
          function(data){
            $("#preview-model").loadShapeJsPreview(data.modelPreviewUrl, 500, 400);
          }, function(error){
            alert(error.runtimeError);
          }
        );
      });
    </script>
  </body>
</html>
